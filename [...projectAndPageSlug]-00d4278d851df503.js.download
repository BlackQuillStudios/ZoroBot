(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8267],{97538:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_projects/[...projectAndPageSlug]",function(){return n(9552)}])},12358:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(79884),a=n(29107);function s(e){let{ariaLabelSuffix:t=""}=e;return(0,r.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center",children:(0,r.jsx)(a.$,{size:"medium",ariaLabel:`Loading... ${t}`.trim()})})}},24107:function(e,t,n){"use strict";n.d(t,{h:function(){return O}});var r=n(79884),a=n(44358),s=n.n(a),i=n(95908),o=n(61070),c=n(93161),l=n(85066),u=n(34678);let d=u.zo.div`
  min-height: "100vh";
  background-color: ${e=>{let{theme:t}=e;return t.app.colors.pageBackground}};
`,p=u.zo.div`
  max-width: 400px;
  margin: 30px auto;
`,h=(0,u.zo)(l.w)`
  text-align: center;
`;var g=n(66970),j=n(57203),x=n(92188),f=n(12046),m=n(65119),b=n(2577),y=n(68011),w=n(50360),v=n(70795);function I(e){let{mutateAsync:t}=x.S.projectAuth.checkPassword.useMutation(),[n,a]=(0,g.useState)(!1),{handleSubmit:s,control:i,setValue:o,setError:c,formState:{isSubmitting:l,errors:u}}=(0,j.cI)(),d=async n=>{let{password:r,captcha:s}=n,{success:i}=await t({projectId:e.projectId,password:r,captcha:s});i?(a(!0),e.onAuthSuccess()):(c("password",{message:"Invalid password"},{shouldFocus:!0}),o("password",""))};return(0,r.jsx)(p,{children:(0,r.jsx)(m.Y,{children:(0,r.jsxs)("form",{onSubmit:s(d),children:[(0,r.jsx)(j.Qr,{name:"password",control:i,rules:{required:"Password is required"},render:e=>{let{field:t}=e;return(0,r.jsx)(b.g,{label:"Enter password to log in",renderInput:e=>(0,r.jsx)(y.o,{...e,...t,type:"password",autoFocus:!0,placeholder:"Password"}),error:u.password?.message})}}),e.captchaEnabled&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.L,{height:20}),(0,r.jsx)(j.Qr,{name:"captcha",control:i,render:()=>(0,r.jsx)(b.g,{error:u.captcha?.message?.toString(),label:"Captcha",renderInput:()=>(0,r.jsx)(v.b,{action:"PROJECT_LOGIN",onChange:e=>{o("captcha",e)}})}),rules:{required:"Captcha is required"}})]}),(0,r.jsx)(f.L,{height:30}),(0,r.jsx)(w.z,{type:"submit",isLoading:l||n,children:"Log in"})]})})})}var E=n(1850),k=n(20297);let L=E.z.object({email:E.z.string().min(1,"Required"),captcha:E.z.string()});function S(e){let{mutateAsync:t}=x.S.projectAuth.consumerAuthStart.useMutation(),{handleSubmit:n,setError:a,setValue:s,control:i,formState:{isSubmitting:o,isSubmitSuccessful:c,errors:l}}=(0,j.cI)({resolver:(0,k.F)(e.captchaEnabled?L:L.omit({captcha:!0}))});(0,g.useEffect)(()=>{e.loginError&&a("email",{message:e.loginError})},[e.loginError,a]);let u=async n=>{let{email:r,captcha:a}=n;await t({projectId:e.projectId,email:r,captcha:a}),e.next()};return(0,r.jsx)(p,{children:(0,r.jsx)(m.Y,{children:(0,r.jsxs)("form",{onSubmit:n(u),children:[(0,r.jsx)(j.Qr,{name:"email",control:i,render:e=>{let{field:t}=e;return(0,r.jsx)(b.g,{label:"Log in with your email address",renderInput:e=>(0,r.jsx)(y.o,{...e,...t,type:"email",autoFocus:!0,placeholder:"Email"}),error:l.email?.message})}}),e.captchaEnabled&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.L,{height:20}),(0,r.jsx)(j.Qr,{name:"captcha",control:i,render:()=>(0,r.jsx)(b.g,{error:l.captcha?.message?.toString(),label:"Captcha",renderInput:()=>(0,r.jsx)(v.b,{action:"PROJECT_LOGIN",onChange:e=>{s("captcha",e)}})}),rules:{required:"Captcha is required"}})]}),(0,r.jsx)(f.L,{height:30}),(0,r.jsx)(w.z,{type:"submit",isLoading:o||c,children:"Get login code"})]})})})}var A=n(90097);let P=u.zo.div`
  text-align: left;
  margin-bottom: -5px;

  p {
    font-size: 15px;
    padding-top: 10px;
  }
`,_=u.zo.div`
  p {
    font-size: 14px;
  }
  a {
    color: inherit;
  }
`,z=E.z.object({otp:E.z.string().regex(A.Av,"Must be a 6-digit number")});function C(e){let{mutateAsync:t}=x.S.projectAuth.consumerAuthCheck.useMutation(),{handleSubmit:n,control:a,formState:{isSubmitting:s,isSubmitSuccessful:i,errors:o}}=(0,j.cI)({resolver:(0,k.F)(z)}),c=async n=>{let{otp:r}=n,a=await t({projectId:e.projectId,otp:r});a.success?e.next():e.onFail("Login attempt failed, try again!")};return(0,r.jsxs)(p,{children:[(0,r.jsxs)(m.Y,{children:[(0,r.jsx)(h,{children:(0,r.jsxs)(P,{children:[(0,r.jsx)("h3",{children:"Check your email"}),(0,r.jsx)("p",{children:"A 6-digit code has been sent to your email address. Enter it below to log in."})]})}),(0,r.jsxs)("form",{onSubmit:n(c),children:[(0,r.jsx)(j.Qr,{name:"otp",control:a,render:e=>{let{field:t}=e;return(0,r.jsx)(b.g,{label:"6-digit code",renderInput:e=>(0,r.jsx)(y.o,{...e,...t,type:"text",autoFocus:!0}),error:o.otp?.message})}}),(0,r.jsx)(f.L,{height:30}),(0,r.jsx)(w.z,{type:"submit",isLoading:s||i,children:"Log in"})]})]}),(0,r.jsx)(f.L,{height:40}),(0,r.jsx)(h,{children:(0,r.jsx)(_,{children:(0,r.jsxs)("p",{children:["Didn't get an email?"," ",(0,r.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),e.back()},children:"Try again"})]})})})]})}function T(e){let[t,n]=(0,g.useState)("send-email"),[a,s]=(0,g.useState)(null),i=e=>{n("send-email"),s(e)};switch(t){case"send-email":return(0,r.jsx)(S,{projectId:e.projectId,captchaEnabled:e.captchaEnabled,loginError:a,next:()=>{n("check-otp")}});case"check-otp":return(0,r.jsx)(C,{projectId:e.projectId,next:()=>e.onAuthSuccess(),back:()=>n("send-email"),onFail:i});default:return t}}let F=u.zo.div`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  margin-bottom: 40px;
`;function N(e){let{logo:t}=e;return t&&t.showLogoOnLoginPage?(0,r.jsx)(F,{children:(0,r.jsx)("img",{src:t.url,alt:t.name,height:t.height??40,width:"auto"})}):null}function O(e){let{projectId:t,projectAppearance:n,projectLogo:a,authType:l,onAuthSuccess:u,captchaEnabled:p}=e,h=(0,i.j)({projectAppearance:n});return(0,r.jsx)(o.Z,{projectTheme:h,children:(0,r.jsxs)(d,{children:[(0,r.jsx)(s(),{children:(0,r.jsx)("title",{children:"Log in"})}),(0,r.jsxs)(c.F,{$isEditing:!1,children:[(0,r.jsx)(N,{logo:a}),function(){switch(l){case"Password":return(0,r.jsx)(I,{projectId:t,onAuthSuccess:u,captchaEnabled:p});case"Consumer":return(0,r.jsx)(T,{projectId:t,onAuthSuccess:u,captchaEnabled:p});default:return l}}()]})]})})}},36006:function(e,t,n){"use strict";n.d(t,{k:function(){return O}});var r=n(79884),a=n(40132),s=n(66970),i=n(92188),o=n(44358),c=n.n(o),l=n(95821),u=n(93161),d=n(97729),p=n(61070),h=n(95908),g=n(33989),j=n.n(g);function x(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j(),{strategy:"afterInteractive",src:`https://www.googletagmanager.com/gtag/js?id=${e.trackingId}`}),(0,r.jsx)(j(),{id:"google-analytics",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:`
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '${e.trackingId}', {
page_path: window.location.pathname,
});
          `}})]})}var f=n(51188),m=n(75420),b=n(7068),y=n(12358),w=n(19278),v=n(53677),I=n(57278),E=n(48897),k=n(29274);function L(e){let{pageId:t,pageTitle:n,isEmbed:a}=e,o=(0,w.d)(),g=o.id,j=(0,k.J)("analytics",{...o.creator,paidFeatureAccess:o.paidFeatureAccess}),{data:L,error:S,isLoading:A}=i.S.pages.get.useQuery({id:t??""},{suspense:!1}),{data:P,error:_,isLoading:z}=i.S.pages.list.useQuery({projectId:g},{enabled:!!o,suspense:!1}),C=(0,s.useMemo)(()=>P??[],[P]),T=(0,s.useMemo)(()=>(0,b.f)(C,o),[C,o]),{data:F}=i.S.consumers.me.useQuery(void 0,{suspense:!1,enabled:!!(o&&o.authType===f.ProjectAuthType.Consumer)}),N=(0,h.j)({projectAppearance:o?.appearance}),O=o?.favicon?.url,{emitConsumerInteractionEvent:M}=(0,m.E)();(0,s.useEffect)(()=>{t&&g&&M({interfaces_project_id:g,interfaces_page_id:t,embedded_flag:a,interaction_goal:"see page",event_action:"enter"})},[A,M,g,t,a]);let $=(0,s.useMemo)(()=>L?.content.blocks.some(e=>"chatbot-block"===e.type)??!1,[L]);if(z||A)return(0,r.jsx)(y.v,{ariaLabelSuffix:[z?"All pages":"",A?"Page":""].filter(Boolean).join(", ")});if(!L||!o||_||S)throw Error("Page did not load");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{minHeight:"100vh"},children:[(0,r.jsxs)(c(),{children:[(0,r.jsx)("title",{children:n}),O&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:`${O}-/resize/180x180/`},"favicon-apple-touch"),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:`${O}-/resize/32x32/`},"favicon-32"),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:`${O}-/resize/16x16/`},"favicon")]})]}),(0,r.jsx)(p.Z,{projectTheme:N,children:(0,r.jsxs)(l.Mi,{isEditing:!1,accountId:o?.accountId,projectId:L.projectId,pageId:L.id,allPages:T,globalNavigation:o.globalNavigation,includeLogo:o.includeLogo,navigationLinks:o.navigationLinks,projectName:o.name,projectSlug:o.slug,navigationEnabled:L.navigationEnabled,logo:o.logo,children:[(0,r.jsx)(E.M,{page:L,children:(0,r.jsx)(v.k,{pages:C,children:(0,r.jsx)(I.FM,{children:(0,r.jsx)(u.T,{blocks:L.content.blocks??[],consumerInfo:F})})})}),(0,r.jsx)(d.Z,{hasChatbot:$,position:"fixed-portal"})]})})]}),j&&o?.googleAnalyticsTrackingId&&(0,r.jsx)(x,{trackingId:o.googleAnalyticsTrackingId})]})}var S=n(79911),A=n(24107),P=n(72305),_=n(34678);let z=_.zo.div`
  min-height: 100vh;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 20px;
  background-color: ${e=>{let{theme:t}=e;return t.app.colors.pageBackground}};

  & > * {
    color: ${e=>{let{theme:t}=e;return t.app.colors.secondaryText}};
    text-align: center;
    font-family: ${e=>{let{theme:t}=e;return t.app.fontFamily}} !important;
  }

  & > h1 {
    font-size: 42px;
    line-height: 50px;
    font-weight: 600;
  }

  & > p {
    font-size: 24px;
    line-height: 40px;
    font-weight: 400;
    max-width: 800px;
  }
`;function C(e){let{title:t,message:n}=e;return(0,r.jsxs)(z,{children:[(0,r.jsx)("h1",{className:"text-center text-3xl font-bold",children:t}),(0,r.jsx)("p",{className:"mt-4 text-center text-lg",children:n})]})}var T=n(70795),F=n(90188),N=n(40191);function O(e){let[t,n]=(0,s.useState)(),{data:i,refetch:o,isLoading:c,isRefetching:l,isError:u,error:d}=(0,a.c)({captchaOverride:t}),[p]=(0,N.g)(["interfaces_enable_add-on"]);if(u){if(d instanceof F.ss&&"interfaces:project-auth:invalid-captcha"===d.data.code)return(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 top-0 flex h-full w-full flex-col flex-wrap content-center justify-center",children:[(0,r.jsx)("p",{children:"Please confirm to continue:"}),(0,r.jsx)(T.b,{action:"LOAD_PROJECT",onChange:e=>{n(e)}})]});throw d}if(c||l||!i)return(0,r.jsx)(S.Z,{});let h={...i?.project.creator,paidFeatureAccess:i?.project?.paidFeatureAccess},g=(0,k.i)(p,"managedUsers",h),j=(0,k.i)(p,"passwordProtect",h);if(i.project.authType!==f.ProjectAuthType.None&&!(g||j))return(0,r.jsx)(C,{title:"Project cannot be rendered",message:"Project access settings are enabled for your account, but your account is not upgraded; please consider upgrading your account or clear access settings to view the project."});if(!1===i.authorized){if("None"===i.project.authType)throw Error('sessionInit is not authorized, but Project authType is "None"');return(0,r.jsx)(A.h,{projectId:i.project.id,captchaEnabled:i.project.captchaEnabled,projectAppearance:i.project.appearance,projectLogo:i.project.logo,authType:i.project.authType,onAuthSuccess:()=>{o()}})}return(0,r.jsx)(w.R,{project:i.project,children:(0,r.jsx)(P.w,{embed:e,children:(0,r.jsx)(L,{pageId:i.pageId,pageTitle:i.pageTitle,isEmbed:e.isEmbed})})})}},48897:function(e,t,n){"use strict";n.d(t,{M:function(){return c},W:function(){return o}});var r=n(79884),a=n(39378),s=n(66970);let i=s.createContext(null);function o(){let e=s.useContext(i);if((0,a.isNull)(e))throw Error("useCurrentPage must be used within a CurrentPageProvider");return e}function c(e){let{children:t,page:n}=e;return(0,r.jsx)(i.Provider,{value:n,children:t})}},40132:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var r=n(66970),a=n(92188),s=n(81113),i=n(82195),o=n(17155);function c(e){let t=(0,s.useRouter)(),n=(0,o.VU)(),c=a.S.projectAuth.sessionInit.useQuery({path:t.asPath,pageId:e?.pageId,captcha:e?.captchaOverride??n.captcha,isHiddenCaptcha:!e?.captchaOverride},{enabled:t.isReady&&"ready"===n.status,suspense:e?.suspense??!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,useErrorBoundary:!1});return"loading"===c.status?n.generate({action:"LOAD_PROJECT"}):"success"===c.status&&n.invalidate(),(0,r.useEffect)(()=>{c.data?.sessionId&&((0,i._)(c.data.sessionId),e?.onProjectSessionInit?.(c.data.sessionId))},[e,c.data?.sessionId]),{...c,recaptchaStatus:n.status}}},7068:function(e,t,n){"use strict";n.d(t,{f:function(){return a}});var r=n(21462);function a(e,t){return e.reduce((e,n)=>({...e,[n.id]:{id:n.id,isHomepage:t?.homepageId===n.id,title:n.title??n.name,url:(0,r.XW)(t?.slug,n.slug,t?.customDomain)}}),{})}},9552:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(79884),a=n(83977),s=n(36006),i=n(17155);function o(){return(0,r.jsx)(a.Z,{hideProgress:!0,skipPageViewEvent:!0,children:(0,r.jsx)(i.xs,{children:(0,r.jsx)(s.k,{isEmbed:!1})})})}}},function(e){e.O(0,[9781,2950,8581,3688,5715,2150,3573,8123,7806,2085,8238,2911,811,5983,1357,3915,2403,2354,6239,3530,4024,7025,129,1705,3977,5604,7284,2888,179],function(){return e(e.s=97538)}),_N_E=e.O()}]);
//# sourceMappingURL=[...projectAndPageSlug]-00d4278d851df503.js.map